<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Student Details - IIIT Bhubaneswar</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="d_student.css">
</head>
<body>

<header class="mobile-header">
    <button id="menuToggle"><i class="fas fa-bars"></i></button>
    <h2>Student Details</h2>
</header>

<div class="container">
    <aside class="sidebar" id="sidebar">
        <a href="d_home.html" class="back-btn-sidebar">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
        <button class="side-btn"><i class="fas fa-bullhorn"></i> Notice Board</button>
        <button class="side-btn"><i class="fas fa-user-graduate"></i> Student Details</button>
        <button class="side-btn"><i class="fas fa-chalkboard-teacher"></i> Faculty Details</button>
        <button class="side-btn"><i class="fas fa-calendar-alt"></i> Timetable</button>
        <button class="side-btn"><i class="fas fa-comment-alt"></i> Grievance</button>

        <div class="logo-container">
            <img src="IIIT LOGO 3.svg" alt="IIIT Logo" class="logo"/>
            <p class="footer-text">IIIT Student Management System</p>
            <a href="https://www.iiit-bh.ac.in" class="footer-link" target="_blank">www.iiit-bh.ac.in</a>
        </div>
    </aside>

    <main class="main-content">
        <div class="header-line">
            <h1><i class="fas fa-user-graduate"></i> Student Details</h1>
            <hr />
        </div>

        <div class="student-section">
            <div class="filter-bar">
                <div>
                    <label for="filterYear">Admission Year</label><br>
                    <select id="filterYear">
                        <option value="">All</option>
                    </select>
                </div>
                <div>
                    <label for="filterBranch">Branch</label><br>
                    <select id="filterBranch">
                        <option value="">All</option>
                        <option value="CSE">CSE</option>
                        <option value="IT">IT</option>
                        <option value="EEE">EEE</option>
                        <option value="ETC">ETC</option>
                        <option value="CE">CE</option>
                    </select>
                </div>
                <div>
                    <label for="filterProgramme">Programme</label><br>
                    <select id="filterProgramme">
                        <option value="">All</option>
                        <option value="B.Tech">B.Tech</option>
                        <option value="M.Tech">M.Tech</option>
                        <option value="Ph.D">Ph.D</option>
                    </select>
                </div>
            </div>
            <div class="search-container">
                <input type="text" id="searchID" placeholder="Search by ID" />
                <input type="text" id="searchName" placeholder="Search by Name" />
                <button onclick="searchStudents()">Search</button>
            </div>

            <div class="results-container">
                <ul id="studentList"></ul>
                <div id="noResultsMessage">No students found matching your search criteria.</div>
            </div>
        </div>
    </main>
</div>

<div class="popup-overlay" id="popupOverlay"></div>
<div class="student-popup" id="studentPopup">
    <img id="popupPhoto" src="https://via.placeholder.com/120" alt="Student Photo" />
    <h3 id="popupName">Student Name</h3>
    <div class="student-info-grid">
        <div class="label">ID:</div><div class="value" id="popupID"></div>
        <div class="label">Branch:</div><div class="value" id="popupBranch"></div>
        <div class="label">Program:</div><div class="value" id="popupProgram"></div>
        <div class="label">Contact:</div><div class="value" id="popupContact"></div>
        <div class="label">Phone:</div><div class="value" id="popupPhone"></div>
        <div class="label">Grade:</div><div class="value" id="popupGrade"></div>
        <div class="label">Last Login:</div><div class="value" id="popupLogin"></div>
    </div>
    <button class="close-btn" onclick="closePopup()">Close</button>
</div>

<script>
    const students = [
        {
            name: 'John Doe',
            id: 'B423024',
            branch: 'CSE',
            program: 'B.Tech',
            contact: 'john@example.com',
            phone: '9876543210',
            grade: '9.2',
            login: '2025-05-12 10:15 AM',
            photo: 'images/john.jpg'
        },
        {
            name: 'Ananya Singh',
            id: 'B423034',
            branch: 'ETC',
            program: 'M.Tech',
            contact: 'ananya@iiitbh.ac.in',
            phone: '9830011122',
            grade: '8.7',
            login: '2025-05-13 9:45 AM',
            photo: 'ananya.jpg'
        },
        {
            name: 'Raj Patel',
            id: 'B123038',
            branch: 'IT',
            program: 'Ph.D',
            contact: 'raj@iiitbh.ac.in',
            phone: '9911223344',
            grade: '9.0',
            login: '2025-05-11 8:00 AM',
            photo: ''
        }
    ];

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        const yearSelect = document.getElementById('filterYear');
        const currentYear = new Date().getFullYear();
        for (let y = currentYear + 5; y >= 1980; y--) {
            const opt = document.createElement('option');
            opt.value = String(y);
            opt.textContent = y;
            yearSelect.appendChild(opt);
        }
        
        // Hide student list and no results message initially
        document.getElementById('studentList').style.display = 'none';
        document.getElementById('noResultsMessage').style.display = 'none';
    });

    // Menu toggle functionality
    const menuToggle = document.getElementById("menuToggle");
    const sidebar = document.getElementById("sidebar");

    menuToggle.addEventListener("click", () => {
        sidebar.classList.toggle("show");
    });

    document.addEventListener("click", (e) => {
        if (window.innerWidth <= 768) {
            if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                sidebar.classList.remove("show");
            }
        }
    });

    // Search functionality
    function searchStudents() {
        const idQuery = document.getElementById('searchID').value.toLowerCase();
        const nameQuery = document.getElementById('searchName').value.toLowerCase();
        const year = document.getElementById('filterYear').value;
        const branch = document.getElementById('filterBranch').value;
        const programme = document.getElementById('filterProgramme').value;
        const list = document.getElementById('studentList');
        list.innerHTML = '';

        const studentsWithYear = students.map(s => ({
            ...s,
            admissionYear: s.id ? ('20' + s.id.substring(2, 4)) : ''
        }));

        const filtered = studentsWithYear.filter(student =>
            student.id.toLowerCase().includes(idQuery) &&
            student.name.toLowerCase().includes(nameQuery) &&
            (year === '' || student.admissionYear === year) &&
            (branch === '' || student.branch === branch) &&
            (programme === '' || student.program === programme)
        );

        if (filtered.length === 0) {
            document.getElementById('studentList').style.display = 'none';
            document.getElementById('noResultsMessage').style.display = 'block';
        } else {
            document.getElementById('studentList').style.display = 'block';
            document.getElementById('noResultsMessage').style.display = 'none';
            filtered.forEach(student => {
                const li = document.createElement('li');
                li.textContent = `${student.name} (${student.id}) - ${student.branch} ${student.program}`;
                li.onclick = () => showStudentDetails(student);
                list.appendChild(li);
            });
        }
    }

    // Show student details popup
    function showStudentDetails(student) {
        document.getElementById('popupName').innerText = student.name;
        document.getElementById('popupID').innerText = student.id;
        document.getElementById('popupBranch').innerText = student.branch;
        document.getElementById('popupProgram').innerText = student.program;
        document.getElementById('popupContact').innerText = student.contact;
        document.getElementById('popupPhone').innerText = student.phone;
        document.getElementById('popupGrade').innerText = student.grade;
        document.getElementById('popupLogin').innerText = student.login;
        document.getElementById('popupPhoto').src = student.photo || 'https://via.placeholder.com/120';
        document.getElementById('studentPopup').style.display = 'flex';
        document.getElementById('popupOverlay').style.display = 'block';
    }

    // Close popup
    function closePopup() {
        document.getElementById('studentPopup').style.display = 'none';
        document.getElementById('popupOverlay').style.display = 'none';
    }

    // Event listeners
    document.getElementById('searchID').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') searchStudents();
    });

    document.getElementById('searchName').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') searchStudents();
    });

    document.getElementById('filterYear').addEventListener('change', searchStudents);
    document.getElementById('filterBranch').addEventListener('change', searchStudents);
    document.getElementById('filterProgramme').addEventListener('change', searchStudents);
</script>
</body>
</html>